# Widget é…ç½®æŒ‡å—

**Widget æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡æŠ½å–çš„è¯­å½•å’Œä½ çš„é€‰æ‹©ï¼Œå¼ºåŒ–"ç«™ç›´"æ•ˆæœã€‚**

---

## ğŸ¯ è®¾è®¡ç†å¿µ

- ğŸ“ æ¯æ¬¡çœ‹æ‰‹æœºéƒ½çœ‹åˆ°é‚£å¥è¯
- ğŸ”´ å¦‚æœé€ƒé¿äº†ï¼Œçº¢è‰²è­¦å‘Š
- ğŸš« ä¸ç»™ä½ å°é˜¶

---

## ğŸ“± Widget ç±»å‹

### æ¡Œé¢å°ç»„ä»¶ï¼ˆ3ç§å°ºå¯¸ï¼‰

| å°ºå¯¸ | å†…å®¹ |
|------|------|
| å° | è¡ŒåŠ¨çŠ¶æ€ + è¯­å½•ï¼ˆ4è¡Œï¼‰ |
| ä¸­ | è¡ŒåŠ¨çŠ¶æ€ + æ—¥æœŸ + è¯­å½•ï¼ˆ3è¡Œï¼‰ + å‡ºå¤„ |
| å¤§ | å®Œæ•´å±•ç¤ºï¼šçŠ¶æ€ + æ—¥æœŸ + è¯­å½• + å‡ºå¤„ |

### é”å±å°ç»„ä»¶ï¼ˆ3ç§æ ·å¼ï¼‰

| æ ·å¼ | å†…å®¹ |
|------|------|
| åœ†å½¢ accessoryCircular | çŠ¶æ€å›¾æ ‡ + çŸ­æ–‡å­— |
| çŸ©å½¢ accessoryRectangular | çŠ¶æ€å›¾æ ‡ + è¯­å½•ï¼ˆ1è¡Œï¼‰ + çŠ¶æ€æ–‡å­— |
| å†…è” accessoryInline | "ç…§åšäº† Â· è¯­å½•å†…å®¹" ä¸€è¡Œæ˜¾ç¤º |

### çŠ¶æ€é¢œè‰²ä¸å›¾æ ‡

| é€‰æ‹© | é¢œè‰² | æ¡Œé¢å›¾æ ‡ | é”å±å›¾æ ‡ |
|------|------|----------|----------|
| âœ… ç…§åšäº† | ğŸŸ¢ ç»¿è‰² | emoji | checkmark.circle |
| âŒ æ²¡ç…§åš | ğŸŸ  æ©™è‰² | emoji | minus.circle |
| ğŸƒ é€ƒé¿äº† | ğŸ”´ çº¢è‰² | emoji | xmark.circle |

---

## ğŸ”§ é…ç½®æ­¥éª¤

### 1. æ·»åŠ  Widget Target

```
File â†’ New â†’ Target â†’ Widget Extension
Product Name: InstructorWidget
ä¸å‹¾é€‰ "Include Configuration Intent"
```

### 2. é…ç½® App Groups

ä¸¤ä¸ª target éƒ½è¦æ·»åŠ ï¼š

```
Signing & Capabilities â†’ + Capability â†’ App Groups
æ·»åŠ : group.com.edge.instructor
```

éœ€è¦é…ç½®çš„ Targetï¼š
- âœ… instructorï¼ˆä¸»åº”ç”¨ï¼‰
- âœ… InstructorWidgetExtensionï¼ˆWidgetï¼‰

### 3. æ·»åŠ å…±äº«æ–‡ä»¶

å°† `Shared/SharedModels.swift` æ·»åŠ åˆ°ä¸¤ä¸ª targetï¼š
- âœ… instructor
- âœ… InstructorWidgetExtension

### 4. è¿è¡Œæµ‹è¯•

```
é€‰æ‹© InstructorWidgetExtension scheme â†’ è¿è¡Œ
```

---

## ğŸ“Š æ•°æ®æµ

```
ä¸»åº”ç”¨ (HomeView.saveAndComplete)
    â†“
saveToWidget() è½¬æ¢æ¨¡å‹
    â†“
SharedDataManager (App Group UserDefaults)
    â†“
Widget Provider (è¯»å–å…±äº«æ•°æ®)
    â†“
Widget è§†å›¾ (æ˜¾ç¤ºæœ€è¿‘è®°å½•)
```

### æ•°æ®è½¬æ¢

ä¸»åº”ç”¨ä¿å­˜æ—¶ï¼Œä¼šå°†å†…éƒ¨æ¨¡å‹è½¬æ¢ä¸ºå…±äº«æ¨¡å‹ï¼š

```swift
// ä¸»åº”ç”¨æ¨¡å‹ â†’ å…±äº«æ¨¡å‹
Situation â†’ SharedSituation
ActionChoice â†’ SharedActionChoice
Quote â†’ SharedQuote
```

---

## ğŸ”„ åˆ·æ–°ç­–ç•¥

- Widget æ¯ **15åˆ†é’Ÿ** è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡
- ç”¨æˆ·å®ŒæˆæŠ½å–åï¼Œæ•°æ®ç«‹å³å†™å…¥ App Group
- ä¸‹æ¬¡ Widget åˆ·æ–°æ—¶æ˜¾ç¤ºæœ€æ–°è®°å½•

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

```
Shared/
â””â”€â”€ SharedModels.swift           # å…±äº«æ•°æ®æ¨¡å‹
    â”œâ”€â”€ SharedSituation          # å¤„å¢ƒï¼ˆå…±äº«ç‰ˆï¼‰
    â”œâ”€â”€ SharedActionChoice       # è¡ŒåŠ¨é€‰æ‹©ï¼ˆå«é¢œè‰²ï¼‰
    â”œâ”€â”€ SharedQuote              # è¯­å½•ï¼ˆç®€åŒ–ç‰ˆï¼‰
    â”œâ”€â”€ SharedLastRecord         # æœ€è¿‘è®°å½•
    â””â”€â”€ SharedDataManager        # æ•°æ®ç®¡ç†å™¨

InstructorWidget/
â”œâ”€â”€ InstructorWidget.swift       # æ¡Œé¢å°ç»„ä»¶
â”‚   â”œâ”€â”€ WidgetEntry              # Timeline Entry
â”‚   â”œâ”€â”€ Provider                 # Timeline Provider
â”‚   â”œâ”€â”€ SmallWidgetView          # å°å°ºå¯¸è§†å›¾
â”‚   â”œâ”€â”€ MediumWidgetView         # ä¸­å°ºå¯¸è§†å›¾
â”‚   â””â”€â”€ LargeWidgetView          # å¤§å°ºå¯¸è§†å›¾
â”‚
â”œâ”€â”€ LockScreenWidget.swift       # é”å±å°ç»„ä»¶
â”‚   â”œâ”€â”€ CircularLockScreenView   # åœ†å½¢è§†å›¾
â”‚   â”œâ”€â”€ RectangularLockScreenView # çŸ©å½¢è§†å›¾
â”‚   â””â”€â”€ InlineLockScreenView     # å†…è”è§†å›¾
â”‚
â””â”€â”€ InstructorWidgetBundle.swift # Widget å…¥å£
```

---

## ğŸ› å¸¸è§é—®é¢˜

| é—®é¢˜ | è§£å†³ |
|------|------|
| Widget ä¸æ˜¾ç¤ºæ•°æ® | æ£€æŸ¥ App Groups é…ç½®æ˜¯å¦ä¸€è‡´ |
| æ˜¾ç¤º"å»æŠ½ä¸€å¥" | å…ˆåœ¨ä¸»åº”ç”¨å®Œæˆä¸€æ¬¡æŠ½å– |
| æ•°æ®ä¸æ›´æ–° | ç­‰å¾… 15 åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°ï¼Œæˆ–é‡æ–°æ·»åŠ  Widget |
| ç¼–è¯‘é”™è¯¯ | Clean Build Folder (â‡§âŒ˜K) |
| SharedModels æ‰¾ä¸åˆ° | ç¡®ä¿æ–‡ä»¶æ·»åŠ åˆ°ä¸¤ä¸ª Target |

---

## ğŸ¨ æ— æ•°æ®çŠ¶æ€

å½“ç”¨æˆ·è¿˜æ²¡æœ‰ä»»ä½•è®°å½•æ—¶ï¼š

| ç»„ä»¶ | æ˜¾ç¤ºå†…å®¹ |
|------|----------|
| æ¡Œé¢å° | ğŸ‘† å›¾æ ‡ + "å»æŠ½ä¸€å¥" |
| æ¡Œé¢ä¸­ | ğŸ‘† å›¾æ ‡ + "å»æŠ½ä¸€å¥ï¼Œç«™ç›´äº†" |
| æ¡Œé¢å¤§ | ğŸ‘† å›¾æ ‡ + "å»æŠ½ä¸€å¥" + "ç«™ç›´äº†" |
| é”å±åœ†å½¢ | ğŸ‘† å›¾æ ‡ |
| é”å±çŸ©å½¢ | ğŸ‘† å›¾æ ‡ + "å»æŠ½ä¸€å¥ï¼Œç«™ç›´äº†" |
| é”å±å†…è” | "å»æŠ½ä¸€å¥" |

---

**è¿™ä¸æ˜¯å†…å®¹æ¶ˆè´¹ï¼Œè¿™æ˜¯è¡ŒåŠ¨æé†’ã€‚**
