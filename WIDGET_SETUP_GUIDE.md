# Widget é…ç½®æŒ‡å— - "ç«™ç›´"æé†’

## ğŸ¯ Widget è®¾è®¡ç†å¿µ

**è¿™ä¸æ˜¯å†…å®¹å±•ç¤º Widgetï¼Œè¿™æ˜¯è¡ŒåŠ¨æé†’ã€‚**

æ¯æ¬¡çœ‹æ‰‹æœºï¼Œä½ éƒ½ä¼šçœ‹åˆ°ï¼š
- ğŸ“ ä½ æŠ½åˆ°çš„é‚£å¥è¯
- âœ… / âŒ ä½ çš„é€‰æ‹©ï¼ˆç…§åšäº†/æ²¡ç…§åš/é€ƒé¿äº†ï¼‰

**å¦‚æœä½ é€‰äº†"é€ƒé¿äº†"ï¼Œé”å±ä¸Šä¼šä¸€ç›´çº¢è‰²æé†’ä½ ã€‚**

---

## ğŸ“± Widget ç±»å‹

### 1. æ¡Œé¢å°ç»„ä»¶ï¼ˆ3ç§å°ºå¯¸ï¼‰

#### å°å°ºå¯¸ï¼ˆ2x2ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€ƒé¿äº†      â”‚  â† çº¢è‰²è­¦å‘Š
â”‚             â”‚
â”‚ æ²¡æœ‰è°ƒæŸ¥ï¼Œ  â”‚
â”‚ å°±æ²¡æœ‰      â”‚
â”‚ å‘è¨€æƒã€‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä¸­å°ºå¯¸ï¼ˆ4x2ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç…§åšäº†  01.07            â”‚
â”‚                          â”‚
â”‚ æ²¡æœ‰è°ƒæŸ¥ï¼Œå°±æ²¡æœ‰å‘è¨€æƒã€‚ â”‚
â”‚                          â”‚
â”‚ â€”â€”ã€Šåå¯¹æœ¬æœ¬ä¸»ä¹‰ã€‹       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å¤§å°ºå¯¸ï¼ˆ4x4ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€ƒé¿äº†  01.07            â”‚
â”‚                          â”‚
â”‚                          â”‚
â”‚ æ²¡æœ‰è°ƒæŸ¥ï¼Œ               â”‚
â”‚ å°±æ²¡æœ‰å‘è¨€æƒã€‚           â”‚
â”‚                          â”‚
â”‚ â€”â€”ã€Šåå¯¹æœ¬æœ¬ä¸»ä¹‰ã€‹       â”‚
â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. é”å±å°ç»„ä»¶ï¼ˆ3ç§æ ·å¼ï¼‰

#### åœ†å½¢
```
  â”Œâ”€â”€â”€â”€â”€â”
  â”‚  âœ•  â”‚  â† é€ƒé¿äº†çš„å›¾æ ‡
  â”‚é€ƒé¿äº†â”‚
  â””â”€â”€â”€â”€â”€â”˜
```

#### çŸ©å½¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ æ²¡æœ‰è°ƒæŸ¥ï¼Œå°±â€¦  â”‚
â”‚   ç…§åšäº†         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å†…è”ï¼ˆæ—¶é—´ä¸Šæ–¹ï¼‰
```
é€ƒé¿äº† Â· æ²¡æœ‰è°ƒæŸ¥ï¼Œå°±æ²¡æœ‰å‘è¨€æƒã€‚
```

---

## ğŸ¨ è§†è§‰è®¾è®¡

### è¡ŒåŠ¨çŠ¶æ€é¢œè‰²
| é€‰æ‹© | é¢œè‰² | å«ä¹‰ |
|------|------|------|
| ç…§åšäº† | ğŸŸ¢ ç»¿è‰² | ç«™ç›´äº† |
| æ²¡ç…§åš | ğŸŸ  æ©™è‰² | è¿˜åœ¨çŠ¹è±« |
| é€ƒé¿äº† | ğŸ”´ çº¢è‰² | éœ€è¦æé†’ |

### æ— è®°å½•æ—¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ‘†      â”‚
â”‚  å»æŠ½ä¸€å¥   â”‚
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ é…ç½®æ­¥éª¤

### 1ï¸âƒ£ æ·»åŠ  Widget Extension Target

1. æ‰“å¼€ `instructor.xcodeproj`
2. File â†’ New â†’ Target...
3. é€‰æ‹© **Widget Extension**
4. Product Name: `InstructorWidget`
5. ä¸å‹¾é€‰ "Include Configuration Intent"
6. ç‚¹å‡» **Finish**

### 2ï¸âƒ£ æ›¿æ¢è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶

åˆ é™¤ Xcode è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä½¿ç”¨å·²åˆ›å»ºçš„ï¼š
- `InstructorWidget/InstructorWidget.swift`
- `InstructorWidget/LockScreenWidget.swift`
- `InstructorWidget/InstructorWidgetBundle.swift`

### 3ï¸âƒ£ é…ç½® App Groups

**è¿™æ˜¯å…³é”®æ­¥éª¤ï¼æ²¡æœ‰è¿™ä¸ªï¼ŒWidget æ— æ³•è¯»å–æ•°æ®ã€‚**

#### ä¸»åº”ç”¨é…ç½®ï¼š
1. é€‰æ‹© **instructor** target
2. Signing & Capabilities
3. ç‚¹å‡» **+ Capability**
4. æ·»åŠ  **App Groups**
5. æ·»åŠ  group: `group.com.edge.instructor`

#### Widget Extension é…ç½®ï¼š
1. é€‰æ‹© **InstructorWidget** target
2. Signing & Capabilities
3. ç‚¹å‡» **+ Capability**
4. æ·»åŠ  **App Groups**
5. æ·»åŠ  group: `group.com.edge.instructor`

### 4ï¸âƒ£ æ·»åŠ å…±äº«æ–‡ä»¶

å°† `Shared/SharedModels.swift` æ·»åŠ åˆ°ä¸¤ä¸ª targetï¼š

1. åœ¨ Xcode ä¸­é€‰ä¸­ `SharedModels.swift`
2. æ‰“å¼€ File Inspectorï¼ˆå³ä¾§é¢æ¿ï¼‰
3. åœ¨ Target Membership ä¸­å‹¾é€‰ï¼š
   - âœ… **instructor**
   - âœ… **InstructorWidget**

### 5ï¸âƒ£ è¿è¡Œæµ‹è¯•

1. é€‰æ‹© **InstructorWidget** scheme
2. è¿è¡Œ
3. åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ·»åŠ  Widget æµ‹è¯•

---

## ğŸ“Š æ•°æ®æµ

```
ä¸»åº”ç”¨ (ActionConfirmationView)
       â”‚
       â”‚ saveRecord()
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SharedDataManager.shared   â”‚
â”‚  saveLastRecord()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ UserDefaults (App Group)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Widget (Provider)          â”‚
â”‚  getLastRecord()            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
  æ˜¾ç¤ºåœ¨æ¡Œé¢/é”å±
```

---

## ğŸ’¡ è®¾è®¡äº®ç‚¹

### 1. æ®‹é…·æé†’
- ä¸æ˜¯æ¶ˆè´¹å†…å®¹
- æ˜¯æé†’ä½ "ç«™å“ªè¾¹"
- å¦‚æœé€ƒé¿äº†ï¼Œçº¢è‰²è­¦å‘Š

### 2. ç®€æ´ç›´æ¥
- ä¸è§£é‡Šï¼Œä¸ç¾åŒ–
- åªæ˜¾ç¤ºäº‹å®
- è¯­å½• + ä½ çš„é€‰æ‹©

### 3. æ— è®°å½•å¼•å¯¼
- æ²¡æœ‰è®°å½•æ—¶æ˜¾ç¤º"å»æŠ½ä¸€å¥"
- å¼•å¯¼ç”¨æˆ·ä½¿ç”¨ä¸»åº”ç”¨
- ä¸åšå†…å®¹æ¨è

### 4. ç¬¦åˆäº§å“å®šä½
- è¿™æ˜¯å·¥å…·ï¼Œä¸æ˜¯å†…å®¹
- å¼ºåŒ–"ç«™ç›´"æ•ˆæœ
- æ¯æ¬¡çœ‹æ‰‹æœºéƒ½æé†’ä½ 

---

## ğŸ”„ åˆ·æ–°æœºåˆ¶

- Widget æ¯ 15 åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡
- ç”¨æˆ·å®Œæˆæ–°çš„æŠ½å–åï¼ŒWidget ä¼šåœ¨ä¸‹æ¬¡åˆ·æ–°æ—¶æ›´æ–°
- ä¹Ÿå¯ä»¥æ‰‹åŠ¨é•¿æŒ‰ Widget â†’ ç¼–è¾‘ â†’ åˆ·æ–°

---

## ğŸ› æ•…éšœæ’é™¤

### Widget ä¸æ˜¾ç¤ºæ•°æ®ï¼Ÿ
1. æ£€æŸ¥ App Groups é…ç½®
2. ç¡®ä¿ä¸¤ä¸ª target ä½¿ç”¨ç›¸åŒçš„ group ID
3. ç¡®ä¿ SharedModels.swift æ·»åŠ åˆ°äº† InstructorWidget target

### Widget æ˜¾ç¤º"å»æŠ½ä¸€å¥"ï¼Ÿ
1. å…ˆåœ¨ä¸»åº”ç”¨ä¸­å®Œæˆä¸€æ¬¡æŠ½å–
2. ç­‰å¾… Widget åˆ·æ–°ï¼ˆæœ€å¤š15åˆ†é’Ÿï¼‰
3. æˆ–æ‰‹åŠ¨åˆ·æ–° Widget

### ç¼–è¯‘é”™è¯¯ï¼Ÿ
1. Clean Build Folder (â‡§âŒ˜K)
2. æ£€æŸ¥æ–‡ä»¶çš„ Target Membership
3. ç¡®è®¤ App Groups entitlements é…ç½®æ­£ç¡®

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

```
Shared/
â””â”€â”€ SharedModels.swift         # å…±äº«æ•°æ®æ¨¡å‹

InstructorWidget/
â”œâ”€â”€ InstructorWidget.swift     # æ¡Œé¢å°ç»„ä»¶
â”œâ”€â”€ LockScreenWidget.swift     # é”å±å°ç»„ä»¶
â””â”€â”€ InstructorWidgetBundle.swift  # Widget å…¥å£
```

---

## âœ… å®Œæˆåæ•ˆæœ

**æ¯æ¬¡çœ‹æ‰‹æœºï¼Œä½ éƒ½ä¼šçœ‹åˆ°ï¼š**

1. ğŸ“ ä½ æŠ½åˆ°çš„é‚£å¥è¯
2. ğŸ¯ ä½ çš„é€‰æ‹©ï¼ˆç…§åšäº†/æ²¡ç…§åš/é€ƒé¿äº†ï¼‰
3. ğŸ“… æŠ½å–æ—¥æœŸ

**å¦‚æœä½ é€‰äº†"é€ƒé¿äº†"ï¼š**
- ğŸ”´ çº¢è‰²è­¦å‘Š
- æ¯æ¬¡çœ‹æ‰‹æœºéƒ½æé†’
- ä¸ç»™ä½ å°é˜¶

---

**è¿™ä¸æ˜¯å†…å®¹æ¶ˆè´¹ï¼Œè¿™æ˜¯è¡ŒåŠ¨æé†’ã€‚ç«™ç›´äº†ã€‚** ğŸ¯
